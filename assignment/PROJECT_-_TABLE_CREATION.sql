

CREATE TABLE ROLE(
ID INT NOT NULL,
ROLE_NAME VARCHAR(50) NOT NULL

CONSTRAINT PK_ROLE_ID PRIMARY KEY(ID)
);


CREATE TABLE USER_ACCOUNT(
ID INT NOT NULL,
USER_NAMES VARCHAR(100) NOT NULL,
EMAIL VARCHAR(254) NOT NULL,
PASSWORD VARCHAR(200) NOT NULL,
PASSWORD_SALT VARCHAR(50),
PASSWORD_HUSH_ALGORITHM VARCHAR(50) NOT NULL

CONSTRAINT PK_USER_ACCOUNT_ID PRIMARY KEY (ID)
);


CREATE TABLE USER_HAS_ROLE(
ID INT NOT NULL,
ROLE_START_TIME DATETIME DEFAULT CURRENT_TIMESTAMP,
ROLE_END_TIME DATETIME DEFAULT CURRENT_TIMESTAMP,
USER_ACCOUNT_ID INT NOT NULL,
ROLL_ID INT NOT NULL

CONSTRAINT PK_USER_HAS_ROLE_ID PRIMARY KEY(ID)
CONSTRAINT FK_USER_ACCOUNT_ID FOREIGN KEY(USER_ACCOUNT_ID)  REFERENCES USER_ACCOUNT(ID),
CONSTRAINT FK_ROLL_ID FOREIGN KEY(ROLL_ID) REFERENCES ROLE(ID)
);

CREATE TABLE USER_HAS_STATUS(
ID INT NOT NULL,
STATUS_TIME_START DATETIME DEFAULT CURRENT_TIMESTAMP ,
STATUS_END_TIME DATETIME DEFAULT CURRENT_TIMESTAMP,
USER_ACCOUNT_ID INT NOT NULL,
STATUS_ID INT NOT NULL

CONSTRAINT PK_USER_HAS_STATUS_ID PRIMARY KEY(ID)
CONSTRAINT FK_USER_ACCOUNT_ID1 FOREIGN KEY(USER_ACCOUNT_ID) REFERENCES USER_ACCOUNT(ID),
CONSTRAINT FK_STATUS_ID FOREIGN KEY(STATUS_ID) REFERENCES USER_HAS_STATUS(ID)
);

CREATE TABLE STATUS(
ID INT NOT NULL,
STATUS_NAME VARCHAR(100) NOT NULL,
IS_USER_WORKING BIT

CONSTRAINT PK_STATUS_ID PRIMARY KEY(ID)
);


INSERT INTO USER_ACCOUNT VALUES
(1,'JULLI','JULICOOPER738@GMAIL.COM','JUAD9893','HJHE893','07dbb6e6832da0841dd79701200e4b179f1a'),
(2,'SANDY','SANDYCOHEN82@GMAIL.COM','KSOKO88','KSPPE79','4b179f1a94a7b3dd26f612817f3c03117434'),
(3,'SETH','SETHCAPTAINOAK@GMAIL.COM','PKPALQ3','PLPOEJ87DF','11c150eb6c1b776f390be60a0a5933'),
(4,'RYAN','RTANATWOOD67@GMAIL,COM','ADSSLE32','HJPDO989KE','33a2a2f8c0a0ce766ed92fea5bfd9313c8f6');


INSERT INTO ROLE VALUES
(101,'CALL CENTER EMPLOYEE'),
(102,'CALL CENTER MANAGER'),
(103,'TECHNICIANS'),
(104,'MANAGER');


INSERT INTO USER_HAS_ROLE VALUES
(1001,CURRENT_TIMESTAMP,'2022-11-17 17:00:00',2,104),
(1002,CURRENT_TIMESTAMP,'2022-11-17 12:00:00',1,102),
(1003,CURRENT_TIMESTAMP,'2022-11-17 14:00:00',4,101),
(1004,CURRENT_TIMESTAMP,'2022-11-17 10:00:00',3,101);

INSERT INTO USER_HAS_STATUS VALUES
(111,CURRENT_TIMESTAMP,'2022-11-17 17:00:00',4,001),
(112,CURRENT_TIMESTAMP,'2022-11-17 12:00:00',1,003),
(113,CURRENT_TIMESTAMP,'2022-11-17 14:00:00',3,002),
(114,CURRENT_TIMESTAMP,'2022-11-17 10:00:00',2,001);

INSERT INTO STATUS VALUES
(001,'WORKING',1),
(002,'VACATION',0),
(003,'ON SICK LEAVE',1);


SELECT * FROM STATUS

DELETE FROM USER_HAS_ROLE WHERE ID=1001;
DELETE FROM USER_HAS_ROLE WHERE ID=1002;
DELETE FROM USER_HAS_ROLE WHERE ID=1003;
DELETE FROM USER_HAS_ROLE WHERE ID=1004;

SELECT * FROM USER_HAS_ROLE;

DELETE FROM ROLE WHERE ID=101;
DELETE FROM ROLE WHERE ID=102;
DELETE FROM ROLE WHERE ID=103;
DELETE FROM ROLE WHERE ID=104;

SELECT * FROM ROLE;

DELETE FROM USER_HAS_STATUS WHERE ID=111;
DELETE FROM USER_HAS_STATUS WHERE ID=112;
DELETE FROM USER_HAS_STATUS WHERE ID=113;
DELETE FROM USER_HAS_STATUS WHERE ID=114;

SELECT * FROM USER_HAS_STATUS

DELETE FROM USER_ACCOUNT WHERE ID=1;
DELETE FROM USER_ACCOUNT WHERE ID=2;
DELETE FROM USER_ACCOUNT WHERE ID=3;
DELETE FROM USER_ACCOUNT WHERE ID=4;

SELECT * FROM USER_ACCOUNT

DELETE FROM STATUS WHERE IS_USER_WORKING=1;
DELETE FROM STATUS WHERE IS_USER_WORKING=0;

SELECT * FROM STATUS;
